{"version":3,"sources":["components/Display.js","components/Calculator.js","index.js"],"names":["Display","props","className","id","currentValue","expression","Calculator","clearState","lastAction","errorState","buttonDefinitions","symbol","state","handleClick","bind","handleKeyPress","document","addEventListener","this","event","target","value","clear","calculate","handleOperator","handleNumber","CLEAN_KEY","key","replace","setState","setTimeout","result","Function","error","operator","createState","startsWith","number","newState","includes","buttonComponents","definitions","makeButtonJSX","onClick","reduce","components","definition","Array","isArray","forEach","index","push","makeButtons","React","Component","App","href","ReactDOM","render","querySelector"],"mappings":"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","file":"static/js/main.72ddfbe6.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Display = props => {\r\n    return (\r\n        <div className=\"display\">\r\n            <div id=\"currentValue\">{props.currentValue}</div>\r\n            <div id=\"expression\">{props.expression}</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Display;","import React from 'react';\r\nimport Display from './Display'\r\n\r\n/*\r\n  TODO: \r\n    -Make it mobile responsive\r\n    -Handle rounding\r\n    -Handle Digit Overflow & Expression Wrapping\r\n*/\r\n\r\nclass Calculator extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.clearState = {\r\n            currentValue: '0',\r\n            expression: '',\r\n            lastAction: null\r\n        }\r\n\r\n        this.errorState = {\r\n            currentValue: 'ERROR',\r\n            expression: '',\r\n            lastAction: null\r\n        }\r\n\r\n        this.buttonDefinitions = [\r\n            [\r\n                'zero',\r\n                'one',\r\n                'two',\r\n                'three',\r\n                'four',\r\n                'five',\r\n                'six',\r\n                'seven',\r\n                'eight',\r\n                'nine'\r\n            ],\r\n            { symbol: '=', id: 'equals' },\r\n            { symbol: '+', id: 'add' },\r\n            { symbol: '-', id: 'subtract' },\r\n            { symbol: '*', id: 'multiply' },\r\n            { symbol: '/', id: 'divide' },\r\n            { symbol: '.', id: 'decimal' },\r\n            { symbol: 'C', id: 'clear' },\r\n        ]\r\n\r\n        this.state = this.clearState;\r\n\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleKeyPress = this.handleKeyPress.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        document.addEventListener('keydown', this.handleKeyPress);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        document.addEventListener('keydown', this.handleKeyPress);\r\n    }\r\n\r\n    handleClick(event) {\r\n        switch (event.target.value) {\r\n            case 'C':\r\n                this.clear();\r\n                break;\r\n            case '=':\r\n                this.calculate();\r\n                break;\r\n            case '+':\r\n            case '-':\r\n            case '*':\r\n            case '/':\r\n                this.handleOperator(event.target.value);\r\n                break;\r\n            default:\r\n                this.handleNumber(event.target.value);\r\n        }\r\n    }\r\n\r\n    handleKeyPress(event) {\r\n        const INVALID_KEYS = /^F\\d{1,2}|[^-1234567890./*+=C]+|^C.+/\r\n        const RAW_KEY = event.key;\r\n\r\n        const CLEAN_KEY = RAW_KEY.replace('Enter', '=')\r\n            .replace('Escape', 'C')\r\n            .replace(INVALID_KEYS, '');\r\n\r\n        CLEAN_KEY && this.handleClick({ target: { value: CLEAN_KEY } });\r\n    }\r\n\r\n    clear() {\r\n        this.setState(this.clearState);\r\n    }\r\n\r\n    error() {\r\n        this.setState(this.errorState);\r\n        setTimeout(() => {\r\n            this.clear();\r\n        }, 1000);\r\n    }\r\n\r\n    calculate() {\r\n        this.setState(state => {\r\n            if (state.lastAction !== 'equals' && state.lastAction !== null) {\r\n                let result;\r\n                try {\r\n                    result = new Function(`'use strict'; return ${state.expression.replace('--', '- -')};`)();\r\n\r\n                } catch {\r\n                    this.error();\r\n                }\r\n                return {\r\n                    currentValue: result,\r\n                    expression: `${state.expression}=${result}`,\r\n                    lastAction: 'equals'\r\n                };\r\n            } else {\r\n                return state;\r\n            }\r\n        })\r\n    }\r\n\r\n    handleOperator(operator) {\r\n        function createState(expression, lastAction) {\r\n            return {\r\n                currentValue: operator,\r\n                expression,\r\n                lastAction\r\n            }\r\n        }\r\n\r\n        this.setState(state => {\r\n            switch (state.lastAction) {\r\n                case null:\r\n                    if (operator === '-') {\r\n                        return createState(operator, 'negative');\r\n                    }\r\n                    break;\r\n                case 'negative':\r\n                    if (operator !== '-') {\r\n                        if (state.expression.startsWith('-')) {\r\n                            return createState(`0${operator}`, 'operator');\r\n                        } else {\r\n                            return createState(`${state.expression.replace(/[-/*+]-*$/, operator)}`, 'operator');\r\n                        }\r\n                    }\r\n                    break;\r\n                case 'operator':\r\n                    if (operator === '-') {\r\n                        return createState(`${state.expression + operator}`, 'negative');\r\n                    } else {\r\n                        return createState(`${state.expression.replace(/[-/*+]-*$/, operator)}`, 'operator')\r\n                    }\r\n                default:\r\n                    return createState(`${state.expression + operator}`, 'operator');\r\n            }\r\n        })\r\n    }\r\n\r\n    handleNumber(number) {\r\n        this.setState(state => {\r\n            let newState = {};\r\n\r\n            if (state.currentValue === '0' || state.lastAction === 'equals') {\r\n                number = number === '.' ? '0.' : number;\r\n                newState = {\r\n                    currentValue: number,\r\n                    expression: number\r\n                };\r\n            } else {\r\n                number = number === '.' && state.currentValue.includes('.') ? '' : number;\r\n                newState = {\r\n                    currentValue: state.currentValue.replace(/^[-/+*]/, '') + number,\r\n                    expression: state.expression + number\r\n                };\r\n            }\r\n\r\n            newState.lastAction = 'number';\r\n            return newState;\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const buttonComponents = makeButtons(this.buttonDefinitions, this.handleClick, this.handleKeyPress);\r\n\r\n        return (\r\n            <div className=\"calculator\">\r\n                <Display currentValue={this.state.currentValue} expression={this.state.expression}></Display>\r\n                {buttonComponents}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nfunction makeButtons(definitions, handleClick, handleKeyPress) {\r\n    function makeButtonJSX(id, symbol) {\r\n        return <button\r\n            className=\"button\"\r\n            key={id}\r\n            id={id}\r\n            value={symbol}\r\n            onClick={handleClick}\r\n        >\r\n            {symbol}\r\n        </button>;\r\n    }\r\n    const buttons = definitions.reduce((components, definition) => {\r\n        if (Array.isArray(definition)) {\r\n            definition.forEach((number, index) => {\r\n                components.push(makeButtonJSX(number, index));\r\n            });\r\n        } else {\r\n            components.push(makeButtonJSX(definition.id, definition.symbol));\r\n        }\r\n\r\n        return components;\r\n    }, []);\r\n\r\n    return buttons;\r\n}\r\n\r\nexport default Calculator;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport Calculator from './components/Calculator';\r\nimport './scss/index.scss';\r\n\r\nif (module.hot) module.hot.accept();\r\n\r\nconst App = () => {\r\n    return (\r\n        <div>\r\n            <Calculator />\r\n            <footer>\r\n                <p>Designed and Developed by <a href=\"https://www.eduard-mekler.com\">Eduard Mekler</a></p>\r\n            </footer>\r\n        </div>\r\n    )\r\n}\r\n\r\nReactDOM.render(\r\n    <App />,\r\n    document.querySelector('#root')\r\n)"],"sourceRoot":""}